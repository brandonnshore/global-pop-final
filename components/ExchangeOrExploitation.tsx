"use client";

import { useState } from "react";

interface Scenario {
  id: number;
  title: string;
  description: string;
  source: string;
  interpretation: string;
  suggestedValue: number; // 0-100, where 0 is exchange, 100 is exploitation
}

const SCENARIOS: Scenario[] = [
  {
    id: 1,
    title: "Shirley Bassey in 'Diamonds from Sierra Leone'",
    description:
      "Kanye West uses the 1971 Shirley Bassey recording in Diamonds from Sierra Leone to critique materialism. The sample is legally licensed and used to frame a critique of fame and consumerism.",
    source: "Based on: Diamonds From Sierra Leone / Source: Sampling and Storytelling: Kanye West's Vocal and Sonic Narratives (Burns, Woods, and Lafrance)",
    interpretation:
      "Although this track isn't traditional global sampling in the geographic sense, it still serves as a great example of showing how Kanye uses samples to build narrative meaning. Burns, Woods, and Lafrance point out that Kanye layers Shirley Bassey's performance against his own voice to create what they call 'narrative tension' (Burns et al. 161). Aside from being a cool sample, Shirley's voice could almost be compared to an analytical source in an essay. Kanye uses her voice to change how the listener hears his commentary about diamonds, excess, and the global systems behind luxury. Because the sample is cleared and Bassey is credited, this falls closer to cultural exchange. The power dynamic is structured, and Kanye is using the sample to heighten a message not to erase its origins. Citation: Burns et al. 2016, 162–168",
    suggestedValue: 25,
  },
  {
    id: 2,
    title: "Kenyan Song 'Kothbiro' in 'Yikes'",
    description:
      "Kanye West samples the Kenyan song Kothbiro in Yikes. The original artists Ayub Ogada and James Mbarack Achieng were unaware that their music was being used and said they were 'clueless' about their contribution.",
    source: "Based on: Kothbiro → Yikes / Source: Kanye West Sampled This 1970s Kenyan Record on Ye (Tambini)",
    interpretation:
      "In this scenario, Tambini's reporting for Okay Africa shows that the members of Black Savage 'learned about the sample from fans online rather than from the producers themselves.' (OkayAfrica) That single detail is enough to demonstrate the twisted power dynamic in play. Kanye West has more than enough access to a team of lawyers, and global distribution networks that can get this sample properly cleared. Black Savage did not even have the basic information that his voice was being used and Tambini adds that the artists behind Kothbiro had 'never been approached for clearance of any kind,' (OkayAfrica) which directly undercuts any argument that this was collaborative or respectful. This case leans heavily toward exploitation due to the fact that there was no communication or credit given whatsoever. Citation: Tambini 2018",
    suggestedValue: 85,
  },
  {
    id: 3,
    title: "Deep Forest's 'Sweet Lullaby'",
    description:
      "Deep Forest samples Afunakwa's Solomon Islands lullaby Rorogwela and turns it into Sweet Lullaby, which becomes a global hit. The original singer gains no direct benefit from the commercial success.",
    source: "Based on: Rorogwela → Sweet Lullaby / Source: A Sweet Lullaby for World Music (Feld)",
    interpretation:
      "Steven Feld writes that Afunakwa's recorded lullaby is used 'as if it were a free floating sonic resource available to anyone who can access the archive' (Feld 188). This is such an intense statement because it frames the recording as something that has no owner or obligations to the community that it came from. A statement that couldn't be further from the truth. The Deep Forest remix builds an entire global product on top of her voice, but Feld emphasizes that the meaning of the original lullaby is nowhere to be found in the commercial version. The track becomes an international success, while the singer and creator remains unnamed and uncompensated. Citation: Feld 2020, 188–216",
    suggestedValue: 95,
  },
  {
    id: 4,
    title: "Kanye's Pattern of Unlicensed Sampling",
    description:
      "Kanye West is sued more than fourteen times for unlicensed sampling including cases where permission was denied but the sample was used anyway.",
    source: "Based on: Kanye's sampling lawsuits / Source: Kanye's Been Sued at Least 14 Times… (King)",
    interpretation:
      "In an article written by Ashley King, Digital Music News outlines multiple cases where plaintiffs claim Kanye used their recordings without clearance, including situations where rights holders 'explicitly denied permission' but the track was still released anyway. King continues stating that one plaintiff accused Kanye of having 'proceeded with the release despite refusal,' which moves the issue beyond creativity and artistry to a pure entitled power imbalance where because Kanye is who he is, he knows no one can stop him. This scenario is exploitation because smaller artists are weak and helpless in comparison to the power Kanye holds. Citation: King 2025",
    suggestedValue: 80,
  },
  {
    id: 5,
    title: "Reverse Engineering Without Original Recordings",
    description:
      "Producers who reverse engineer samples without using the original recordings but attempt to recreate vintage textures for artistic reasons.",
    source: "Based on: Reverse engineering practices / Source: Hip-Hop Pedagogy as Production Practice",
    interpretation:
      "Producer and Author Mike Exarchos describes reverse engineering as a method where producers 'disassemble musical gestures to understand how they function and then rearticulate them without borrowing the recording itself' (Exarchos 118). He believes that the point is to study the architecture of a sound and build something with that, not extract the sound itself. Since the producer rebuilds everything from scratch, no one person's voice or performance is being taken or repurposed. Citation: Exarchos 2018, 115–123",
    suggestedValue: 20,
  },
  {
    id: 6,
    title: "Cultural Appropriation Framework",
    description:
      "Annemette Kirkegaard defines cultural appropriation in music as borrowing that can either promote cross-cultural understanding or deepen inequality depending on power structures.",
    source: "Based on: Understanding cultural appropriation / Source: Cultural Appropriation Within Music Culture",
    interpretation:
      "Kirkegaard explains that appropriation becomes harmful when the borrowed material is 'removed from its original value system and repositioned within a dominant cultural frame' (Kirkegaard 6). What matters is not the stylistic borrowing but rather how the act of taking someone's sound changes the meaning of the sample, and also changes who benefits from it. She underlines that the problem grows when recognition or reciprocity is missing. This scenario sets the criteria for all the others, since it defines the line between respectful exchange and extraction. Citation: Kirkegaard 2015, 4–10",
    suggestedValue: 50,
  },
];

export default function ExchangeOrExploitation() {
  const [currentScenario, setCurrentScenario] = useState(0);
  const [sliderValue, setSliderValue] = useState(50);
  const [showInterpretation, setShowInterpretation] = useState(false);
  const [responses, setResponses] = useState<{ [key: number]: number }>({});

  const scenario = SCENARIOS[currentScenario];

  const handleSubmit = () => {
    setResponses({ ...responses, [scenario.id]: sliderValue });
    setShowInterpretation(true);
  };

  const handleNext = () => {
    if (currentScenario < SCENARIOS.length - 1) {
      setCurrentScenario(currentScenario + 1);
      setSliderValue(responses[SCENARIOS[currentScenario + 1].id] || 50);
      setShowInterpretation(false);
    }
  };

  const handlePrevious = () => {
    if (currentScenario > 0) {
      setCurrentScenario(currentScenario - 1);
      setSliderValue(responses[SCENARIOS[currentScenario - 1].id] || 50);
      setShowInterpretation(false);
    }
  };

  const handleReset = () => {
    setSliderValue(50);
    setShowInterpretation(false);
  };

  return (
    <div className="min-h-screen bg-[#e8e0d0] py-12 px-4 sm:px-6 lg:px-8">
      <div className="max-w-4xl mx-auto">
        {/* Header - Classic Mac Window Style */}
        <div className="mb-8 bg-[#f5f1e8] border-3 border-black p-6" style={{ boxShadow: 'inset -2px -2px 0px 0px rgba(0,0,0,0.5), inset 2px 2px 0px 0px rgba(255,255,255,0.8)' }}>
          <div className="border-b-2 border-black pb-4 mb-4">
            <h1 className="text-4xl font-bold text-black tracking-tight">
              Exchange or Exploitation
            </h1>
          </div>
          <p className="text-base text-black font-medium">
            An Interactive Exploration of Cultural Appropriation in Sampling
          </p>
        </div>

        {/* Progress Indicator - Retro Style */}
        <div className="mb-8 bg-[#f5f1e8] border-3 border-black p-4" style={{ boxShadow: 'inset -2px -2px 0px 0px rgba(0,0,0,0.5), inset 2px 2px 0px 0px rgba(255,255,255,0.8)' }}>
          <p className="text-sm font-bold text-black mb-3">
            Scenario {currentScenario + 1} of {SCENARIOS.length}
          </p>
          <div className="flex gap-1">
            {SCENARIOS.map((_, idx) => (
              <div
                key={idx}
                className={`h-5 flex-1 border-2 border-black ${
                  idx === currentScenario
                    ? "bg-[#d8a5a8]"
                    : idx in responses
                    ? "bg-[#e5bdc0]"
                    : "bg-white"
                }`}
                style={{
                  boxShadow: idx === currentScenario || idx in responses
                    ? 'inset 2px 2px 0px 0px rgba(0,0,0,0.3)'
                    : 'inset -1px -1px 0px 0px rgba(0,0,0,0.2), inset 1px 1px 0px 0px rgba(255,255,255,0.8)'
                }}
              />
            ))}
          </div>
        </div>

        {/* Scenario Card - Mac OS Window */}
        <div className="mb-8 bg-white border-3 border-black" style={{ boxShadow: '4px 4px 0px 0px rgba(0,0,0,1)' }}>
          {/* Title Bar */}
          <div className="bg-[#f5f1e8] border-b-3 border-black px-4 py-2" style={{ boxShadow: 'inset 0px 1px 0px 0px rgba(255,255,255,0.8)' }}>
            <div className="flex items-center gap-2">
              <div className="w-3 h-3 border-2 border-black bg-white"></div>
              <h2 className="text-sm font-bold text-black uppercase tracking-wide">
                Case Study
              </h2>
            </div>
          </div>
          {/* Content */}
          <div className="p-6">
            <h3 className="text-xl font-bold text-black mb-4 border-b-2 border-black pb-2">
              {scenario.title}
            </h3>
            <p className="text-base text-black leading-relaxed mb-4">
              {scenario.description}
            </p>
            <div className="bg-[#f5f1e8] border-2 border-black p-3" style={{ boxShadow: 'inset 2px 2px 0px 0px rgba(0,0,0,0.2)' }}>
              <p className="text-sm text-black font-bold">
                Source: {scenario.source}
              </p>
            </div>
          </div>
        </div>

        {/* Slider Section - Classic Mac Control Panel */}
        <div className="mb-8 bg-[#f5f1e8] border-3 border-black" style={{ boxShadow: '4px 4px 0px 0px rgba(0,0,0,1)' }}>
          {/* Title Bar */}
          <div className="bg-[#e8e0d0] border-b-3 border-black px-4 py-2" style={{ boxShadow: 'inset 0px 1px 0px 0px rgba(255,255,255,0.8)' }}>
            <div className="flex items-center gap-2">
              <div className="w-3 h-3 border-2 border-black bg-white"></div>
              <h2 className="text-sm font-bold text-black uppercase tracking-wide">
                Your Assessment
              </h2>
            </div>
          </div>

          <div className="p-6">
            <div className="flex justify-between items-center mb-4">
              <span className="text-xs font-bold text-black tracking-wider border-2 border-black px-3 py-1 bg-white">
                EXCHANGE
              </span>
              <span className="text-xs font-bold text-black tracking-wider border-2 border-black px-3 py-1 bg-white">
                EXPLOITATION
              </span>
            </div>

            {/* Custom Slider Container - Retro Mac Style */}
            <div className="relative mb-4">
              {/* Track with retro gradient */}
              <div className="border-2 border-black bg-white p-1">
                <div className="h-6 flex">
                  {/* Green section */}
                  <div className="flex-1 bg-[#b8d4b8] border-r-2 border-black"></div>
                  {/* Yellow section */}
                  <div className="flex-1 bg-[#e8d898] border-r-2 border-black"></div>
                  {/* Pink section */}
                  <div className="flex-1 bg-[#d8a5a8]"></div>
                </div>
              </div>

              {/* Slider Input */}
              <input
                type="range"
                min="0"
                max="100"
                value={sliderValue}
                onChange={(e) => setSliderValue(Number(e.target.value))}
                disabled={showInterpretation}
                className="absolute top-0 w-full h-full bg-transparent appearance-none cursor-pointer disabled:cursor-not-allowed slider-thumb-retro"
                style={{
                  WebkitAppearance: "none",
                }}
              />
            </div>

            {/* Value Markers */}
            <div className="flex justify-between text-xs text-black font-bold mb-6 px-1">
              <span>0</span>
              <span>50</span>
              <span>100</span>
            </div>

            {/* Current Value Display - Retro Badge */}
            <div className="text-center">
              <div
                className={`inline-block border-3 border-black px-6 py-2 text-base font-bold ${
                  sliderValue < 35
                    ? "bg-[#b8d4b8]"
                    : sliderValue < 65
                    ? "bg-[#e8d898]"
                    : "bg-[#d8a5a8]"
                }`}
                style={{ boxShadow: 'inset -2px -2px 0px 0px rgba(0,0,0,0.3), inset 2px 2px 0px 0px rgba(255,255,255,0.6)' }}
              >
                {sliderValue < 35
                  ? "Exchange"
                  : sliderValue < 65
                  ? "Ambiguous"
                  : "Exploitation"}
              </div>
            </div>
          </div>
        </div>

        {/* Action Buttons - Classic Mac Buttons */}
        <div className="mb-8 flex flex-wrap gap-4 justify-center">
          {!showInterpretation ? (
            <>
              <button
                onClick={handleSubmit}
                className="px-6 py-2 bg-[#d8a5a8] border-3 border-black font-bold text-black text-sm uppercase tracking-wide hover:bg-[#c89598] active:shadow-none transition-all"
                style={{ boxShadow: 'inset -2px -2px 0px 0px rgba(0,0,0,0.4), inset 2px 2px 0px 0px rgba(255,255,255,0.7), 3px 3px 0px 0px rgba(0,0,0,1)' }}
              >
                Submit Response
              </button>
              <button
                onClick={handleReset}
                className="px-6 py-2 bg-white border-3 border-black font-bold text-black text-sm uppercase tracking-wide hover:bg-[#f5f1e8] active:shadow-none transition-all"
                style={{ boxShadow: 'inset -2px -2px 0px 0px rgba(0,0,0,0.4), inset 2px 2px 0px 0px rgba(255,255,255,0.7), 3px 3px 0px 0px rgba(0,0,0,1)' }}
              >
                Reset
              </button>
            </>
          ) : (
            <>
              <button
                onClick={handlePrevious}
                disabled={currentScenario === 0}
                className="px-6 py-2 bg-white border-3 border-black font-bold text-black text-sm uppercase tracking-wide hover:bg-[#f5f1e8] active:shadow-none transition-all disabled:opacity-40 disabled:cursor-not-allowed"
                style={{ boxShadow: 'inset -2px -2px 0px 0px rgba(0,0,0,0.4), inset 2px 2px 0px 0px rgba(255,255,255,0.7), 3px 3px 0px 0px rgba(0,0,0,1)' }}
              >
                Previous
              </button>
              <button
                onClick={() => setShowInterpretation(false)}
                className="px-6 py-2 bg-white border-3 border-black font-bold text-black text-sm uppercase tracking-wide hover:bg-[#f5f1e8] active:shadow-none transition-all"
                style={{ boxShadow: 'inset -2px -2px 0px 0px rgba(0,0,0,0.4), inset 2px 2px 0px 0px rgba(255,255,255,0.7), 3px 3px 0px 0px rgba(0,0,0,1)' }}
              >
                Revise Answer
              </button>
              {currentScenario < SCENARIOS.length - 1 && (
                <button
                  onClick={handleNext}
                  className="px-6 py-2 bg-[#d8a5a8] border-3 border-black font-bold text-black text-sm uppercase tracking-wide hover:bg-[#c89598] active:shadow-none transition-all"
                  style={{ boxShadow: 'inset -2px -2px 0px 0px rgba(0,0,0,0.4), inset 2px 2px 0px 0px rgba(255,255,255,0.7), 3px 3px 0px 0px rgba(0,0,0,1)' }}
                >
                  Next Scenario
                </button>
              )}
            </>
          )}
        </div>

        {/* Interpretation Section */}
        {showInterpretation && (
          <div className="space-y-6 animate-fadeIn">
            <div className="bg-white border-3 border-black" style={{ boxShadow: '4px 4px 0px 0px rgba(0,0,0,1)' }}>
              {/* Title Bar */}
              <div className="bg-[#f5f1e8] border-b-3 border-black px-4 py-2" style={{ boxShadow: 'inset 0px 1px 0px 0px rgba(255,255,255,0.8)' }}>
                <div className="flex items-center gap-2">
                  <div className="w-3 h-3 border-2 border-black bg-white"></div>
                  <h2 className="text-sm font-bold text-black uppercase tracking-wide">
                    Scholarly Interpretation
                  </h2>
                </div>
              </div>
              <div className="p-6">
                <div className="bg-[#f5f1e8] border-l-4 border-[#d8a5a8] p-4 border-2 border-black" style={{ boxShadow: 'inset 2px 2px 0px 0px rgba(0,0,0,0.1)' }}>
                  <p className="text-base text-black leading-relaxed">
                    {scenario.interpretation}
                  </p>
                </div>
              </div>
            </div>

            {/* Comparison Card - Retro Stats Window */}
            <div className="bg-[#2a2a2a] border-3 border-black" style={{ boxShadow: '4px 4px 0px 0px rgba(0,0,0,1)' }}>
              <div className="bg-[#3a3a3a] border-b-3 border-black px-4 py-2" style={{ boxShadow: 'inset 0px 1px 0px 0px rgba(255,255,255,0.2)' }}>
                <div className="flex items-center gap-2">
                  <div className="w-3 h-3 border-2 border-white bg-[#2a2a2a]"></div>
                  <h2 className="text-sm font-bold text-white uppercase tracking-wide">
                    Comparison
                  </h2>
                </div>
              </div>
              <div className="p-6">
                <div className="grid md:grid-cols-2 gap-6">
                  <div className="bg-[#3a3a3a] border-2 border-white p-4" style={{ boxShadow: 'inset 2px 2px 0px 0px rgba(0,0,0,0.5)' }}>
                    <p className="text-xs font-bold text-[#b8d4b8] mb-2 uppercase tracking-wider">
                      Your Response
                    </p>
                    <p className="text-3xl font-bold mb-1 text-white">{sliderValue}/100</p>
                    <p className="text-sm text-[#e8e0d0] font-bold">
                      {sliderValue < 35
                        ? "Exchange"
                        : sliderValue < 65
                        ? "Ambiguous"
                        : "Exploitation"}
                    </p>
                  </div>
                  <div className="bg-[#3a3a3a] border-2 border-white p-4" style={{ boxShadow: 'inset 2px 2px 0px 0px rgba(0,0,0,0.5)' }}>
                    <p className="text-xs font-bold text-[#d8a5a8] mb-2 uppercase tracking-wider">
                      Scholar's Perspective
                    </p>
                    <p className="text-3xl font-bold mb-1 text-white">
                      {scenario.suggestedValue}/100
                    </p>
                    <p className="text-sm text-[#e8e0d0] font-bold">
                      {scenario.suggestedValue < 35
                        ? "Exchange"
                        : scenario.suggestedValue < 65
                        ? "Ambiguous"
                        : "Exploitation"}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        )}

        {/* Final Reflection */}
        {currentScenario === SCENARIOS.length - 1 && showInterpretation && (
          <div className="mt-8 bg-[#d8a5a8] border-3 border-black" style={{ boxShadow: '4px 4px 0px 0px rgba(0,0,0,1)' }}>
            <div className="bg-[#c89598] border-b-3 border-black px-4 py-2" style={{ boxShadow: 'inset 0px 1px 0px 0px rgba(255,255,255,0.6)' }}>
              <div className="flex items-center gap-2">
                <div className="w-3 h-3 border-2 border-black bg-white"></div>
                <h2 className="text-sm font-bold text-black uppercase tracking-wide">
                  Reflection
                </h2>
              </div>
            </div>
            <div className="p-6">
              <p className="text-base leading-relaxed text-black font-medium">
                You have now evaluated all six scenarios. The purpose of this exercise is not
                to find a single "correct" answer, but to understand that cultural
                appropriation in sampling exists on a spectrum. Context matters. Power
                matters. Collaboration matters. As Kirkegaard argues, the same act can be
                exchange or exploitation depending on how it is executed and who holds the
                power.
              </p>
            </div>
          </div>
        )}
      </div>

      <style jsx>{`
        .slider-thumb-retro::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
          width: 20px;
          height: 32px;
          border-radius: 0;
          background: #f5f1e8;
          cursor: pointer;
          border: 3px solid black;
          box-shadow: inset -2px -2px 0px 0px rgba(0, 0, 0, 0.4),
            inset 2px 2px 0px 0px rgba(255, 255, 255, 0.8),
            2px 2px 0px 0px rgba(0, 0, 0, 1);
          transition: all 0.1s ease;
        }

        .slider-thumb-retro::-webkit-slider-thumb:hover {
          background: #e8e0d0;
        }

        .slider-thumb-retro::-webkit-slider-thumb:active {
          box-shadow: inset 2px 2px 0px 0px rgba(0, 0, 0, 0.4),
            inset -2px -2px 0px 0px rgba(255, 255, 255, 0.8);
        }

        .slider-thumb-retro::-moz-range-thumb {
          width: 20px;
          height: 32px;
          border-radius: 0;
          background: #f5f1e8;
          cursor: pointer;
          border: 3px solid black;
          box-shadow: inset -2px -2px 0px 0px rgba(0, 0, 0, 0.4),
            inset 2px 2px 0px 0px rgba(255, 255, 255, 0.8),
            2px 2px 0px 0px rgba(0, 0, 0, 1);
          transition: all 0.1s ease;
        }

        .slider-thumb-retro::-moz-range-thumb:hover {
          background: #e8e0d0;
        }

        .slider-thumb-retro::-moz-range-thumb:active {
          box-shadow: inset 2px 2px 0px 0px rgba(0, 0, 0, 0.4),
            inset -2px -2px 0px 0px rgba(255, 255, 255, 0.8);
        }

        .slider-thumb-retro:disabled::-webkit-slider-thumb {
          cursor: not-allowed;
          opacity: 0.5;
        }

        .slider-thumb-retro:disabled::-moz-range-thumb {
          cursor: not-allowed;
          opacity: 0.5;
        }

        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
      `}</style>
    </div>
  );
}
